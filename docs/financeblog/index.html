<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WebWorkVision - Blog</title>
  <link rel="stylesheet" href="../styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body id="body">
  <header class="header">
<nav class="navbar">
  <div class="nav-container">
    <a href="#" class="nav-logo">WebWorkVision blog</a>
    <button class="nav-toggle" id="nav-toggle" aria-label="Abrir menú">
      ☰
    </button>
    <ul class="nav-menu" id="nav-menu">
      <li><a href="#body" class="nav-link">home</a></li>
      <li><a href="#article-container" class="nav-link">news</a></li>
      <li><a href="#about" class="nav-link">about us</a></li>
      <li><a href="#footer" class="nav-link">contact us</a></li>
    </ul>
  </div>
</nav>

  </header>


  <section class="hero container">
    <h2>the blog for finance and investments</h2>
    <p>Explore content, tutorials, and news from the financial and investment world.</p>
  </section>

  <main class="container main-content">
    <section class="blog-list">
      <div id="article-container"></div>
    </section>

    <aside class="sidebar">
      <div class="popular-posts">
        <h4>popular posts</h4>
        <ul>
          <li><a href="#">.</a></li>
          <li><a href="#">.</a></li>
          <li><a href="#">.</a></li>
        </ul>
      </div>
    </aside>
  </main>

<section class="about" id="about">
  <div class="about-container">
    <h3 class="about-title">about us</h3>
    <p class="about-text">
      <strong>WebWorkVision</strong> is a blog dedicated to bringing you the latest <strong>news</strong> and <strong>trends</strong> of the moment.
      Our mission is to keep you informed with brief, clear, and daily updated articles.
    </p>
    <p class="about-text">
      From <strong>technology</strong> to <strong>global current affairs</strong>, we select the most relevant topics and present them to you quickly and accessibly.
    </p>
    <p class="about-text">
      We believe in <strong>information as a powerful tool</strong>, which is why we constantly work to offer quality content with a modern, dynamic, and reliable approach.
    </p>
  </div>
</section>

  <footer id="footer" class="footer container">
    <nav class="footer-nav">
      <ul>
        <li><a href="../politica.html">privacy policy</a></li>
        <li><a href="../terminos.html">terms and conditions</a></li>
      </ul>
    </nav>

    <form class="footer-form" action="mailto:webworkvision@gmail.com" method="post" enctype="text/plain">
      <label for="email">send us a message:</label>
      <input type="email" id="email" name="email" placeholder="your email" required />
      <button type="submit">send</button>
    </form>

    <p class="copyright">
      &copy; 2025 WebWorkVision.
    </p>
  </footer>
  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  query,
  orderBy
} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDuI1i-VauC9rp-YOWe2GGpHXhOiX9eR3o",
  authDomain: "webworkvisionblog.firebaseapp.com",
  projectId: "webworkvisionblog",
  storageBucket: "webworkvisionblog.appspot.com",
  messagingSenderId: "1031451530206",
  appId: "1:1031451530206:web:8fa548813cc1d8ba49034f",
  measurementId: "G-0BDZXG0P7C"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const container = document.getElementById("article-container");
const asideList = document.querySelector(".popular-posts ul");

function slugify(text) {
  return text.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/(^-|-$)/g, "");
}

async function loadArticles() {
  container.innerHTML = "<p>loading articles...</p>";
  try {
    const q = query(collection(db, "finance_articles"), orderBy("date", "desc"));
    const querySnapshot = await getDocs(q);

    container.innerHTML = "";
    asideList.innerHTML = "";

    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const title = data.title || "Sin título";
      const description = data.description || "Sin descripción";
      const id = slugify(title);

      let date = "";
      if (data.date) {
        if (typeof data.date.toDate === "function") {
          date = data.date.toDate().toLocaleDateString("es-AR");
        } else {
          date = new Date(data.date).toLocaleDateString("es-AR");
        }
      }

      // Artículo principal
      const articleHTML = `
        <div class="article" id="${id}">
          <h2>${title}</h2>
          <small>${date}</small>
          <p>${description}</p>
        </div>
      `;
      container.innerHTML += articleHTML;

      // Enlace popular en el aside
      const asideItem = document.createElement("li");
      asideItem.innerHTML = `<a href="#${id}">${title}</a>`;
      asideList.appendChild(asideItem);
    });
  } catch (error) {
    console.error("Error, no cargaron los articulos", error);
    container.innerHTML = "<p>Error not loading articles.</p>";
  }
}

window.addEventListener("load", loadArticles);

// Scroll suave y centrado al hacer clic en los links del aside
asideList.addEventListener("click", (e) => {
  if (e.target.tagName === "A") {
    e.preventDefault();
    const targetId = e.target.getAttribute("href").substring(1);
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
      targetElement.scrollIntoView({
        behavior: "smooth",
        block: "center"
      });
      history.pushState(null, "", `#${targetId}`);
    }
  }
});


    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        const href = this.getAttribute('href');
        if (href.startsWith('#')) {
          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            history.pushState(null, '', href);
          }
        }
      });
    });
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('nav-toggle');
    const menu = document.getElementById('nav-menu');

    if (toggle && menu) {
      toggle.addEventListener('click', () => {
        menu.classList.toggle('active');
      });
    }
  });

</script>
</body>
</html>
